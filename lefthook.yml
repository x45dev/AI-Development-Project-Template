# lefthook.yml
# Git hooks managed by lefthook

pre-commit:
  commands:
    lint:
      run: mise run lint
      tags: [lint]
      files: git diff --cached --name-only --diff-filter=ACM
    format:
      run: mise run python-format
      tags: [format]
      files: git diff --cached --name-only --diff-filter=ACM

commit-msg:
  commands:
    commitizen:
      run: exec cz check --commit-msg-file "{1}"

pre-push:
  commands:
    lint:
      run: mise run lint
      tags: [lint]
      files: git diff --cached --name-only --diff-filter=ACM
    format:
      run: mise run python-format
      tags: [format]
      files: git diff --cached --name-only --diff-filter=ACM
    commitizen-branch:
      run: cz check --rev-range $(git merge-base main HEAD)..HEAD
